운영체제의 크기와 복잡성
- 현대 운영체제는 매우 크고 복잡한 시스템이므로 신중하게 설계해야 함.
- 운영체제가 올바르게 동작하고 쉽게 변경될 수 있도록 구조적으로 설계할 필요가 있음.
 모듈화(Modularization) 접근 방식
- 일관된 단일 시스템이 아니라, 작은 구성요소(모듈)로 분할하는 것이 일반적.
- 각 모듈은 명확한 인터페이스와 기능을 정의하여 독립적으로 동작할 수 있도록 설계됨.
- 이러한 접근 방식은 소프트웨어 개발에서 함수와 모듈을 나누는 방식과 유사함.
	- 예: `main()` 함수에 모든 코드를 넣는 대신 로직을 여러 개의 함수로 분리하고,
	- 매개변수와 반환 값을 명확히 정의한 후 호출하는 방식을 사용.
운영체제의 구성 요소와 커널 설계
- 운영체제는 여러 구성 요소로 이루어져 있으며, 이 구성 요소들이 어떻게 연결되고 커널로 결합되는지가 중요함.

## 2.8.1 모놀리식 구조
- 모놀리식 구조 
	- 커널의 모든 기능을 단일 주소 공간에서 실행되는 단일 정적 이진 파일에 넣는 것
- UNIX 운영체제 구조
	- 최초의 UNIX 운영체제는 **커널과 시스템 프로그램**으로 구성됨.
    - 커널은 시스템 콜 인터페이스 아래와 물리적 하드웨어 위의 모든 기능을 포함.
    - 파일 시스템, CPU 스케줄링, 메모리 관리 등 운영체제 기능 제공.
    - 하나의 주소 공간에서 결합하기에는 기능이 방대함.
![[2.8.1.1.png]]
- Linux 운영체제 구조
    - UNIX 기반이며, glibc 표준 C 라이브러리를 사용하여 커널과 통신.
    - 모놀리식 커널(단일 주소 공간에서 실행) 구조이지만 모듈식 설계를 통해 런타임 중 커널 수정 가능.
![[2.8.1.2.png]]
- 모놀리식 커널의 특징
    - 구현 및 확장하기 어렵지만, 성능이 뛰어남.
    - 시스템 콜 인터페이스의 오버헤드가 적고, 커널 내부 통신 속도가 빠름.
    - 성능과 효율성 덕분에 UNIX, Linux, Windows 운영체제에서 여전히 사용됨.
## 2.8.2 계층적 접근
- 모놀리식 접근법과 <font color="#0070c0">밀접 결합 시스템</font>
    - 시스템의 한 부분을 변경하면 다른 부분에도 영향을 주므로 밀접하게 결합된 시스템으로 불림.
    - 대안으로 <font color="#0070c0">느슨하게 결합된 시스템</font>(모듈 방식)이 있으며, 기능이 독립적인 작은 구성요소로 나뉘어 있음.
    - 모듈 방식의 장점 : 한 구성요소의 변경이 다른 구성요소에 영향을 주지 않음 → 시스템 구현 및 유지보수 용이.
- <font color="#0070c0">계층적 접근 방식</font>
    - 운영체제를 여러 개의 층으로 나누어 설계하는 방법.
    - 층 구조 예시
        - 층 0: 하드웨어
        - 층 N: 사용자 인터페이스
    - 각 층은 데이터 구조와 연산을 포함하며, 상위 층은 하위 층의 연산만 호출 가능.
    - 장점
        - 구현 및 디버깅이 용이함 → 하위 층을 먼저 디버깅하면 상위 층의 오류를 쉽게 찾을 수 있음.
        - 상위 층이 하위 층의 내부 동작을 몰라도 기능을 사용할 수 있어 모듈화가 가능함.
- 계층화된 시스템의 활용과 한계
    - 컴퓨터 네트워크(TCP/IP), 웹 응용 프로그램 등에서 성공적으로 사용됨.
    - 그러나 운영체제에서는 순수한 계층 접근 방식이 드뭄.
        - 이유:
            - 각 계층의 기능을 적절히 정의하는 것이 어려움.
            - 여러 계층을 통과해야 하는 오버헤드로 인해 성능 저하 발생.
    - 현대 운영체제는 적절한 수준의 계층화를 통해 모듈화의 장점을 최대한 활용함.ㅍ
![[2.8.2.1.png]]
## 2.8.3 마이크로커널
- 초기 UNIX와 모놀리식 커널 문제점
    - UNIX는 모놀리식 커널 구조를 가짐.
    - UNIX 확장으로 인해 커널이 커지고 관리가 어려워짐.
- 마이크로커널 접근법
    - 1980년대 중반 **Carnegie-Mellon 대학** 연구자들이 **Mach 운영체제** 개발.
    - 핵심 아이디어: **중요하지 않은 기능을 커널에서 제거**하고 **사용자 공간에서 실행**하는 구조.
    - 결과적으로 **더 작은 커널**을 가지게 됨.
    - 일반적으로 **통신 기능, 프로세스 관리, 메모리 관리 등 최소한의 기능만 포함**.
- 마이크로커널의 동작 방식
    - 클라이언트 프로그램과 서비스가 직접 상호작용하지 않고, 메시지 전달을 통해 마이크로커널과 통신.
    - 예: 클라이언트가 파일 접근 시, 파일 서버와 직접 통신하지 않고 마이크로커널을 통해 메시지를 주고받음.
![[2.8.3.1.png]]
- 마이크로커널의 장점
    - 운영체제 확장이 용이** → 새로운 기능을 사용자 공간에서 추가 가능 (커널 수정 불필요).
    - 이식성 증가 → 작은 커널 덕분에 **하드웨어 간 포팅이 쉬움**.
    - 보안성과 신뢰성 향상 → 개별 서비스가 사용자 공간에서 실행되므로 한 서비스의 오류가 전체 시스템에 영향을 주지 않음.
- 마이크로커널 기반 운영체제 사례
    - macOS 및 iOS의 Darwin 커널 (Mach 마이크로커널 포함).
    - 실시간 운영체제 QNX** (메시지 전달 및 프로세스 스케줄링 제공).
- 마이크로커널의 단점 (성능 저하 문제)*
    - 메시지 전달 오버헤드 → 두 개의 사용자 공간 서비스가 통신하려면 메시지 복사 비용 발생.
    - 프로세스 전환 비용 → 운영체제가 메시지 전달을 위해 프로세스를 전환해야 할 수도 있음.
    - Windows NT 사례
        - 초기 버전은 계층화된 마이크로커널 구조였으나 성능 저하 문제 발생.
        - **Windows NT 4.0 → 일부 계층을 커널 공간으로 옮겨 성능 개선.
        - **Windows XP 이후 → 마이크로커널보다는 모놀리식에 가까운 구조로 변경.
## 2.8.4 모듈
- 적재가능 커널 모듈 개념
	- 현대 운영체제에서 커널이 핵심 구성요소를 유지하면서 동적으로 모듈을 추가하는 기법
	- Linux, macOS, Solaris, Windows 등 최신 UNIX 기반 운영체제에서 널러 사용함
	- 영어 명 : loadable kernel modules, LKM
- LKM 모듈의 장점
    - 커널의 동적 확장 가능 → 부팅 시 또는 실행 중에도 새로운 기능 추가 가능.
    - 커널 재컴파일 불필요 → 직접 커널을 수정하는 방식보다 효율적.
    - 예: CPU 스케줄링, 메모리 관리는 커널에 직접 구현, 파일 시스템 지원은 적재가능 모듈로 구현.
- LKM과 기존 커널 구조 비교
    - 계층 구조와 유사 → 각 부분이 정의된 인터페이스를 가짐.
    - 마이크로커널과 유사 → 핵심 기능만 포함하고, 추가 기능은 모듈을 통해 확장.
    - 마이크로커널보다 효율적 → 메시지 전달 방식 대신 직접 호출 방식을 사용하여 성능 저하 방지.
- Linux에서의 LKM 활용
    - 장치 드라이버와 파일 시스템 지원에 주로 사용.
    - USB 장치 연결 시 동적으로 적재 가능 → 필요할 때만 드라이버를 로드하여 메모리 절약.
    - 불필요한 경우 런타임 중에 커널에서 제거 가능 → 유연한 시스템 운영 가능.
- LKM의 핵심 장점
    - 모놀리식 커널의 성능을 유지하면서도 동적, 모듈식 커널을 구현 가능.
    - 확장성과 유지보수성이 뛰어나며, 커널 수정 없이 새로운 기능 추가 가능.
## 2.8.5 하이브리드 시스템
- 운영체제는 하나의 구조를 엄격하게 따르기보다 성능, 보안, 편리성을 고려한 혼용 구조를 채택함.
- Linux는 모놀리식 구조를 가지지만, 모듈을 사용하여 동적으로 기능 추가가 가능함.
- Windows도 기본적으로 모놀리식 구조이지만, 마이크로커널의 특징을 일부 포함하여 사용자 모드 프로세스를 지원함.
- Windows는 동적으로 적재 가능한 커널 모듈을 지원함.
- Linux와 Windows 10의 사례 연구는 각각 20장과 21장에서 다룸.
- 추가적으로 Apple macOS, iOS, Android 등의 혼용 시스템을 분석함.
### 2.8.5.1 macOS와 iOS

### 2.8.5.2 Android
